# Task 4

## Exp. 1 - Setup
I think it all worked as intended

## Exp. 2 - Establish relationships
see files

### Q1: 
Runs with the h2 database engine.

I don't really know what else to say.. Kinda ambigious question

### Q2:
Creating a table matching that of customer

```SQL
CREATE TABLE Customer (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

-- The relationships cannot be modeled as lists within Customer
-- So we need discreete relationship tables

CREATE TABLE Customer_Address (
    customer_id BIGINT,
    address_id BIGINT,

    PRIMARY KEY (customer_id, address_id),
    FOREIGN KEY (customer_id)   REFERENCES Customer(id) ON DELETE CASCADE,
    FOREIGN KEY (address_id)    REFERENCES Address(id) ON DELETE CASCADE
);


CREATE TABLE Customer_CreditCard (
    customer_id BIGINT,
    creditcard_id BIGINT,

    PRIMARY KEY (customer_id, creditcard_id),
    FOREIGN KEY (customer_id)   REFERENCES Customer(id) ON DELETE CASCADE,
    FOREIGN KEY (creditcard_id) REFERENCES CreditCard(id) ON DELETE CASCADE
);

```

### Q3:
I edited the persistence.xml file to have show_sql: True
And added the java classes with their path using <class>

I got all the tables listed out as SQL in the terminal.

I do not really know what expectations i had. 
But i expected that you had to explicitly define primary and foreign keys within the tables themselves.

There were also a lot of hibernate expressions with something about constraints and foregin keys.

Output is at the bottom of the file

## Other
Code:
https://github.com/CitrusLL/dat250-jpa-tutorial/tree/master/src/main/java/no/hvl/dat250/jpa/tutorial/creditcards 

Outstanding stuff:
I don't really know what to do with Main..

Terminal Output:
```
Hibernate: 
    create table Bank (
        id bigint generated by default as identity,
        name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table CreditCard (
        balance integer,
        creditLimit integer,
        number integer,
        bank_id bigint,
        id bigint generated by default as identity,
        pincode_id bigint,
        primary key (id)
    )
Hibernate: 
    create table Customer (
        id bigint generated by default as identity,
        name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table Customer_Address (
        addresses_id bigint not null,
        residents_id bigint not null
    )
Hibernate: 
    create table Customer_CreditCard (
        Customer_id bigint not null,
        creditCards_id bigint not null
    )
Hibernate: 
    create table Pincode (
        count integer,
        id bigint generated by default as identity,
        pinCode varchar(255),
        primary key (id)
    )
Hibernate: 
    create table Todo (
        id bigint generated by default as identity,
        description varchar(255),
        summary varchar(255),
        primary key (id)
    )
Hibernate: 
    alter table if exists CreditCard 
       add constraint FKe2wqhnxpkjp87b3eyfq6gl39a 
       foreign key (bank_id) 
       references Bank
Hibernate: 
    alter table if exists CreditCard 
       add constraint FKfky0y471d7n8cebc1oe28idci 
       foreign key (pincode_id) 
       references Pincode
Hibernate: 
    alter table if exists Customer_Address 
       add constraint FK5ov3y8x18tb2tfs01klxn7g7o 
       foreign key (addresses_id) 
       references Address
Hibernate: 
    alter table if exists Customer_Address 
       add constraint FKes16tfhb67qqf7lqx6t6uk7cv 
       foreign key (residents_id) 
       references Customer
Hibernate: 
    alter table if exists Customer_CreditCard 
       add constraint FKlsjp44vhufgo7x9ua27827f39 
       foreign key (creditCards_id) 
       references CreditCard
Hibernate: 
    alter table if exists Customer_CreditCard 
       add constraint FKbcd9tsn3uxf491h4bv3vo023m 
       foreign key (Customer_id) 
       references Customer
```